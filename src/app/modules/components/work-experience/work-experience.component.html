<div class="container">
    <form [formGroup]="experienceForm">
        <div formArrayName="workExperiences">
            <div *ngFor="let proj of workExperiences.controls; let i = index" [formGroupName]="i">
                <hr>
                <div class="mb-3">
                    <label for="company" class="form-label">Company</label>
                    <input type="text" class="form-control no-outline" (keyup)="triggerUpdate()" formControlName="company" id="company">
                </div>
                <div class="mb-3">
                    <label for="position" class="form-label">Position</label>
                    <input type="email" class="form-control no-outline" (keyup)="triggerUpdate()" formControlName="position" id="position">
                </div>
                <div class="mb-3">
                    <label for="startDate" class="form-label">Start Date</label>
                    <div class="input-group">
                        <input id="startDate" class="form-control" placeholder="yyyy-mm-dd" name="startDate"
                            formControlName="startDate" ngbDatepicker #startDateDp="ngbDatepicker" (dateSelect)="triggerUpdate()" />
                        <button id="btn-startDate" class="btn btn-outline-secondary bi bi-calendar3" (click)="startDateDp.toggle()"
                            type="button"></button>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="endDate" class="form-label">End Date</label>
                    <div class="input-group">
                        <input id="endDate" class="form-control" placeholder="yyyy-mm-dd" name="endDate"
                            formControlName="endDate" ngbDatepicker #endDateDp="ngbDatepicker"  (dateSelect)="triggerUpdate()" />
                        <button id="btn-endDate" class="btn btn-outline-secondary bi bi-calendar3" (click)="endDateDp.toggle()"
                            type="button"></button>
                    </div>
                </div>

                <div class="mb-3 d-flex align-items-center">
                    <input id="currentWork" type="checkbox" formControlName="currentWork"
                        class="form-check-input me-2" (change)="triggerUpdate()" />
                    <label for="currentWork" class="form-check-label">Currently working here</label>
                </div>
                
                <div class="mb-3">
                    <label for="jobSummary" class="form-label">Job Summary</label>
                    <textarea type="text" class="form-control no-outline" (keyup)="triggerUpdate()" formControlName="jobSummary"
                        id="jobSummary"></textarea>
                </div>
                <button id="add-work" (click)="removeWork(i)" type="button" class="btn px-3">
                    Remove work
                </button>
            </div>
        </div>
    </form>
    <div>
        <hr>
        <button id="add-work" (click)="addWork()" type="button" class="btn px-3">
            Add work
        </button>
    </div>
</div>